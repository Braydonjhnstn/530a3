##
## README.md
## Name: Braydon Johnston REDid: 131049942 Class Acc: cssc2115
## Assignment 3
## CS530-03 Fall 2025
##

## Files

# source Code
- main.c          - main program for file I/O and statement processing
- scanner.l       - flex lexer file defining tokens
- parser.y        - bison parser file defining grammar rules

# tests
- scanme.txt              - main test file 
- test1.txt               - my test files
- test2.txt               - my test files
- test3.txt               - my test files
- test1_expected.txt      - expected output 1
- test2_expected.txt      - expected output 2
- test3_expected.txt      - expected output 3
- out.txt                 - main expected output

# other
- Makefile        - build config for compiling easily
- README          - this file
- gitignore       - used to not push generate files to git

# generated
- lex.yy.c        - generated C code from scanner.l
- parser.tab.c    - generated C code from parser.y
- parser.tab.h    - generated header file from parser.y
- scanner         - executable

## compile instructions

# using Makefile:
- cd a3 and type:
	make

# to clean generated files:
	make clean

# to run the scanner:
	./scanner [filename]

if no filename is provided auto runs scanme.txt

# example usage:
	./scanner scanme.txt
	./scanner test1.txt

## BNF Grammar

<program>         ::= <statement_list>
<statement_list>  ::= <statement> NEWLINE <statement_list>
                    | <statement> NEWLINE
                    | <statement>
                    | Îµ

<statement>       ::= <assignment>
                    | <expression>

<assignment>      ::= ID ASSIGN <expression> SEMICOLON

<atom>            ::= ID
                    | LPAREN ID OP ID RPAREN

<expression>      ::= <atom> OP <atom>
                    | <expression> OP <atom>

OP                ::= OP_PLUS | OP_MINUS | OP_MULT | OP_DIV | OP_MOD

Where:
- ID is an identifier: starts with a character (a-z, A-Z), followed by any 
  combination of characters and digits (0-9)
- OP_PLUS is '+'
- OP_MINUS is '-'
- OP_MULT is '*'
- OP_DIV is '/'
- OP_MOD is '%'
- ASSIGN is '='
- SEMICOLON is ';'
- LPAREN is '('
- RPAREN is ')'
- NEWLINE is '\n'

spacing rules:
- ID, OP, ASSIGN, and SEMICOLON must have a space before and after
- LPAREN must have a space before (but not necessarily after)
- RPAREN must have a space before (but not necessarily after)

## output format

the scanner prints each statement followed by its validation result:
- Valid statements: `[statement]  --  valid`
- Invalid statements: `[statement]  --  invalid: [reason]`

error messages include:
- "op op" - for consecutive operators
- "invalid token \"X\"" - for invalid characters/tokens
- "invalid assignment" - for assignment syntax errors
- "missing expression" - for incomplete expressions
- "syntax error" - for other syntax issues

## tool versions, matched with edoras
- flex 2.6.1
- bison 3.0.4
- gcc 8.5.0
- GNU Make 4.2.1

## significant design decisions

- used flex and bison for lexing and parsing as per assignment specificions 
- implemented pre-scanning to detect "op op" errors before parsing
- prioritized certain error types (e.g., "op op" over invalid tokens)
- handled Windows line endings (\r\n) in input files
- trimmed leading spaces for display while preserving full line content

## known deficiencies
- some warnings thrown when make , i believe it depends on os

## lessons learned

- understanding shift/reduce conflicts in bison grammars
- proper error recovery and reporting in parsers
- handling edge cases with parentheses and operators
- omportance of testing with various invalid input cases
- managing lexer and parser state between multiple input lines
